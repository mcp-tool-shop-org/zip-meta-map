# zip-meta-map Specification — v0.1

## Overview

zip-meta-map generates a set of metadata files that describe the contents of a ZIP archive or project directory. These files enable AI agents and automation tools to navigate codebases efficiently without reading every file.

## Generated Files

### Required

| File | Format | Purpose |
|------|--------|---------|
| `META_ZIP_FRONT.md` | Markdown | Human-readable summary for orientation |
| `META_ZIP_INDEX.json` | JSON | Machine-readable file inventory, roles, and traversal plans |

### Optional

| File | Format | Purpose |
|------|--------|---------|
| `META_ZIP_POLICY.json` | JSON | Access controls and agent behavior constraints |

## META_ZIP_FRONT.md

A Markdown document containing:

- **Title**: project name (derived from directory name or archive filename)
- **Description**: one-line summary (placeholder in v0.1)
- **File count**: total files indexed
- **Start here**: list of recommended entry-point files
- **Profile**: the detected or specified profile name
- **Generated by**: tool name and version

This file is for humans. Agents should prefer `META_ZIP_INDEX.json`.

## META_ZIP_INDEX.json

The primary machine-readable manifest. Validated against `meta_zip_index.schema.json`.

### Top-level fields

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `format` | string | yes | Always `"zip-meta-map"` |
| `version` | string | yes | Spec version, currently `"0.1"` |
| `generated_by` | string | yes | Tool identifier, e.g. `"zip-meta-map/0.1.0"` |
| `profile` | string | yes | Profile used for categorization (e.g. `"python_cli"`) |
| `start_here` | string[] | yes | Ordered list of files to read first |
| `ignore` | string[] | yes | Glob patterns that were excluded from indexing |
| `files` | FileEntry[] | yes | Complete inventory of indexed files |
| `plans` | object | yes | Named traversal plans (see below) |

### FileEntry

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `path` | string | yes | Relative path from archive/project root |
| `size_bytes` | integer | yes | File size in bytes |
| `sha256` | string | yes | SHA-256 hex digest of file contents |
| `role` | string | yes | Role from the vocabulary below |
| `tags` | string[] | no | Freeform tags for additional categorization |

### Role Vocabulary (v0.1)

Roles are intentionally small. Profiles may restrict which roles they use, but the full vocabulary is:

| Role | Meaning |
|------|---------|
| `entrypoint` | Primary entry point (main script, index file) |
| `config` | Configuration file (pyproject.toml, package.json, etc.) |
| `source` | Application/library source code |
| `test` | Test files |
| `doc` | Documentation (markdown, rst, txt) |
| `schema` | Schema definitions (JSON Schema, protobuf, etc.) |
| `data` | Data files (fixtures, samples, static assets) |
| `build` | Build scripts, Makefiles, CI configs |
| `unknown` | Could not determine role |

### Plans

Plans are named traversal strategies that tell an agent how to navigate the archive for a specific goal. Each plan is an object with:

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `description` | string | yes | What this plan helps accomplish |
| `steps` | string[] | yes | Ordered instructions (natural language) |
| `budget_bytes` | integer | no | Suggested max bytes to read for this plan |
| `stop_after` | string[] | no | Files/patterns — stop traversal after reading these |

Plans are advisory. Agents may deviate based on their own judgment.

**Standard plan names** (profiles should define at least `overview`):

- `overview` — quick orientation, understand what the project is
- `debug` — find and fix a bug
- `add_feature` — understand where to add new functionality
- `security_review` — identify security-sensitive code paths

## META_ZIP_POLICY.json

Optional file that constrains agent behavior. Validated against `meta_zip_policy.schema.json`.

### Top-level fields

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `format` | string | yes | Always `"zip-meta-policy"` |
| `version` | string | yes | Spec version, currently `"0.1"` |
| `read_only` | string[] | no | Glob patterns for files agents should not modify |
| `no_execute` | string[] | no | Glob patterns for files agents should not execute |
| `sensitive` | string[] | no | Glob patterns for files containing secrets or PII |
| `notes` | string | no | Freeform guidance for agents |

## Trust Model

The index is **advisory, not authoritative**. Consumers should:

1. **Validate** the index against the JSON Schema before trusting it
2. **Cross-check** the `files` array against the actual archive listing — missing or extra files indicate the index is stale
3. **Verify hashes** — if a file's actual SHA-256 doesn't match the index, the entry is stale
4. **Treat roles as hints** — v0.1 role assignment is basic; consumers may reclassify

The index is a map, not a lock. It helps you navigate; it doesn't prevent you from looking elsewhere.
